# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ BoomBet - –ë—É–∫–º–µ–∫–µ—Ä—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

## üéØ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

BoomBet - —ç—Ç–æ –±—É–∫–º–µ–∫–µ—Ä—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å—Ç–∞–≤–æ–∫ –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ live –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –≤—ã–∏–≥—Ä—ã—à–µ–π –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

---

## üìä –°—Ö–µ–º–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           FRONTEND (React + Vite)                        ‚îÇ
‚îÇ                         http://localhost:3000                            ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚Ä¢ React 18.2.0 + TypeScript                                            ‚îÇ
‚îÇ  ‚Ä¢ Zustand (—Å–æ—Å—Ç–æ—è–Ω–∏–µ)                                                  ‚îÇ
‚îÇ  ‚Ä¢ Axios (HTTP –∫–ª–∏–µ–Ω—Ç)                                                  ‚îÇ
‚îÇ  ‚Ä¢ Tailwind CSS (UI)                                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ HTTP/REST
                             ‚îÇ JWT Token (Authorization header)
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        API GATEWAY (Spring Cloud Gateway)                ‚îÇ
‚îÇ                         http://localhost:8080                            ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ  ‚Ä¢ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤                                 ‚îÇ
‚îÇ  ‚Ä¢ JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è (AuthenticationFilter)                                 ‚îÇ
‚îÇ  ‚Ä¢ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (RouterValidator)                             ‚îÇ
‚îÇ  ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ X-Authenticated-User-Email header                         ‚îÇ
‚îÇ  ‚Ä¢ –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö endpoint'–æ–≤                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                        ‚îÇ                     ‚îÇ
       ‚îÇ HTTP/REST              ‚îÇ HTTP/REST           ‚îÇ HTTP/REST
       ‚îÇ /api/auth/**           ‚îÇ /api/v1/**          ‚îÇ /api/v1/**
       ‚ñº                        ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AUTH SERVICE    ‚îÇ  ‚îÇ   CORE SERVICE      ‚îÇ  ‚îÇ  REALTIME SERVICE      ‚îÇ
‚îÇ  localhost:8081  ‚îÇ  ‚îÇ   localhost:8082    ‚îÇ  ‚îÇ   localhost:8083       ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ ‚Ä¢ Registration   ‚îÇ  ‚îÇ ‚Ä¢ Events CRUD       ‚îÇ  ‚îÇ ‚Ä¢ Mock data generator  ‚îÇ
‚îÇ ‚Ä¢ Login/Logout   ‚îÇ  ‚îÇ ‚Ä¢ Markets & Odds    ‚îÇ  ‚îÇ ‚Ä¢ External API         ‚îÇ
‚îÇ ‚Ä¢ JWT generation ‚îÇ  ‚îÇ ‚Ä¢ Bet placement     ‚îÇ  ‚îÇ   simulator            ‚îÇ
‚îÇ ‚Ä¢ User auth      ‚îÇ  ‚îÇ ‚Ä¢ Bet settlement    ‚îÇ  ‚îÇ ‚Ä¢ Event updates        ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ ‚Ä¢ Balance mgmt      ‚îÇ  ‚îÇ ‚Ä¢ Odds updates         ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ ‚Ä¢ Transactions      ‚îÇ  ‚îÇ                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                         ‚îÇ
         ‚îÇ JDBC                  ‚îÇ JDBC                    ‚îÇ Kafka Producer
         ‚ñº                       ‚ñº                         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ         PostgreSQL Database                 ‚îÇ           ‚îÇ
‚îÇ         localhost:5432                      ‚îÇ           ‚îÇ
‚îÇ                                             ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ users (authentication data)              ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ events (matches, odds)                   ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ markets (betting markets)                ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ outcomes (possible results)              ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ bets (user bets)                         ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ betselections (bet outcomes)             ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ transactions (balance operations)        ‚îÇ           ‚îÇ
‚îÇ  ‚Ä¢ sports (sports catalog)                  ‚îÇ           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
                                                           ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ events-updates topic
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Apache Kafka + Zookeeper            ‚îÇ
‚îÇ         localhost:9092                      ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ Topic: events-updates                    ‚îÇ
‚îÇ  ‚Ä¢ Topic: notifications                     ‚îÇ
‚îÇ  ‚Ä¢ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è                ‚îÇ
‚îÇ  ‚Ä¢ Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ Kafka Consumer
                   ‚îÇ events-updates topic
                   ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   CORE SERVICE      ‚îÇ
         ‚îÇ (EventUpdateListener)‚îÇ
         ‚îÇ                     ‚îÇ
         ‚îÇ ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π ‚îÇ
         ‚îÇ ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î     ‚îÇ
         ‚îÇ ‚Ä¢ Bet settlement    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üèóÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### 1. **Frontend (React + TypeScript)**

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** React 18, TypeScript, Vite, Zustand, Axios, Tailwind CSS

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π
- Single Page Application (SPA) —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ live –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫—É–ø–æ–Ω–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞–≤–æ–∫ –∏ –±–∞–ª–∞–Ω—Å–∞

**–ü–æ—á–µ–º—É React?**

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Å–ª–æ–∂–Ω–æ–≥–æ UI
- Virtual DOM –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è live-—Å–æ–±—ã—Ç–∏–π
- –ë–æ–ª—å—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫
- TypeScript –¥–æ–±–∞–≤–ª—è–µ—Ç type safety

---

### 2. **API Gateway (Spring Cloud Gateway)** :8080

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Spring Boot 3.5.6, Spring Cloud Gateway, JWT

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞** - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç frontend –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —à–ª—é–∑
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –≤–∞–ª–∏–¥–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –Ω—É–∂–Ω—ã–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö endpoint'–æ–≤
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –ø–µ—Ä–µ–¥–∞—á–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ header

**–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω Gateway?**

- **–£–ø—Ä–æ—â–µ–Ω–∏–µ frontend** - –æ–¥–∏–Ω endpoint –≤–º–µ—Å—Ç–æ —Ç—Ä–µ—Ö —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏** - –≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã

**–ú–∞—Ä—à—Ä—É—Ç—ã:**

- `/api/auth/**` ‚Üí Auth Service (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω)
- `/api/v1/**` ‚Üí Core Service (—Å–æ–±—ã—Ç–∏—è, —Å—Ç–∞–≤–∫–∏)
- –ü—É–±–ª–∏—á–Ω—ã–µ endpoint'—ã: `/api/auth/login`, `/api/auth/register`, `/api/v1/events/**`
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ endpoint'—ã: `/api/v1/bets/**`, `/api/v1/profile/**`

---

### 3. **Auth Service** :8081

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Spring Boot, Spring Security, JWT, BCrypt, PostgreSQL

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª–µ–π (BCrypt)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ email/password
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤** (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 10 —á–∞—Å–æ–≤)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

**–ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å?**

- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ª–æ–≥–∏–∫—É auth –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏–∑–æ–ª—è—Ü–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - auth –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω auth —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoint'—ã:**

- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –≤—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**

- –¢–∞–±–ª–∏—Ü–∞ `users`: user_id, email, password_hash, balance, status

---

### 4. **Core Service** :8082

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Spring Boot, JPA/Hibernate, PostgreSQL, Kafka Consumer

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –º–∞—Ç—á–µ–π
- **–ú–∞—Ä–∫–µ—Ç—ã –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞–º–∏ —Å—Ç–∞–≤–æ–∫ –∏ odds
- **–†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫** - –ø—Ä–∏–µ–º —Å—Ç–∞–≤–æ–∫ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–∞—Å—á–µ—Ç –≤—ã–∏–≥—Ä—ã—à–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π settlement –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º** - –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ/—Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
- **–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –∞—É–¥–∏—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü–æ—á–µ–º—É Core Service - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π?**

- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** - —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** - –≥–ª–∞–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã
- **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoint'—ã:**

- `GET /api/v1/events/live` - live —Å–æ–±—ã—Ç–∏—è
- `GET /api/v1/events/upcoming` - –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è
- `GET /api/v1/events/{id}/markets` - –º–∞—Ä–∫–µ—Ç—ã –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- `POST /api/v1/bets` - —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
- `GET /api/v1/bets/history` - –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫
- `POST /api/v1/events/{id}/finish` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (admin)

**Scheduled –∑–∞–¥–∞—á–∏:**

- **BetSettlementScheduler** (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–∞–≤–æ–∫ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- **EventStatusScheduler** (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) - –ø–µ—Ä–µ–≤–æ–¥ upcoming ‚Üí live –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (8 —Ç–∞–±–ª–∏—Ü):**

- `events` - —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `markets` - —Ç–∏–ø—ã —Å—Ç–∞–≤–æ–∫ (Match Winner, Total Goals)
- `outcomes` - –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏
- `bets` - —Å—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `betselections` - –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏—Å—Ö–æ–¥—ã –≤ —Å—Ç–∞–≤–∫–µ
- `transactions` - –∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π (BET_PLACEMENT, WIN)
- `sports` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (shared —Å Auth Service)

---

### 5. **Realtime Service** :8083

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Spring Boot, Kafka Producer, Scheduler

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–ò–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ API** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∫–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ Kafka
- **–°–∏–º—É–ª—è—Ü–∏—è live-–º–∞—Ç—á–µ–π** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞ –∏ odds

**–ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å?**

- **–ò–∑–æ–ª—è—Ü–∏—è –≤–Ω–µ—à–Ω–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API
- **–ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ Core Service
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **DataFetchScheduler** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–∫–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ (–∫–æ–º–∞–Ω–¥—ã, —Å—á–µ—Ç, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã)
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `MatchUpdateDTO` –≤ Kafka topic `events-updates`
4. Core Service –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ Kafka –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î

**–ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**

- –°–ª—É—á–∞–π–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (Team A-F)
- –°—Ç–∞—Ç—É—Å: 70% upcoming, 30% live
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã: Match Winner (1.5-4.0), Total Goals (1.8-2.6)
- –°—á–µ—Ç –¥–ª—è live –º–∞—Ç—á–µ–π (0-4 –≥–æ–ª–æ–≤)

---

### 6. **PostgreSQL Database** :5432

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** PostgreSQL 15

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
- **ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–≤—è–∑–µ–π (events ‚Üí markets ‚Üí outcomes ‚Üí bets)

**–ü–æ—á–µ–º—É PostgreSQL?**

- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - ACID –≥–∞—Ä–∞–Ω—Ç–∏–∏ –¥–ª—è —Å—Ç–∞–≤–æ–∫ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ JOIN –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **JSON –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **Open Source** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ —à–∏—Ä–æ–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã):**

```sql
users (user_id, email, password_hash, balance, status)
  ‚Üì
bets (bet_id, user_id, stake_amount, total_odds, potential_payout, status)
  ‚Üì
betselections (selection_id, bet_id, outcome_id, odds_at_placement)
  ‚Üì
outcomes (outcome_id, market_id, name, current_odds, is_active)
  ‚Üì
markets (market_id, event_id, name)
  ‚Üì
events (event_id, sport_id, team_a, team_b, start_time, status, result)
  ‚Üì
sports (sport_id, name)

transactions (transaction_id, user_id, amount, type, status)
```

---

### 7. **Apache Kafka + Zookeeper** :9092

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Confluent Kafka 7.3.0, Zookeeper

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è** –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- **Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —Å–æ–±—ã—Ç–∏—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü–æ—á–µ–º—É Kafka?**

- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** - –º–∏–ª–ª–∏–æ–Ω—ã —Å–æ–±—ã—Ç–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- **Durability** - —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫
- **Replay** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
- **Decoupling** - —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ –Ω–∞–ø—Ä—è–º—É—é

**Topics:**

- `events-updates` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –æ—Ç Realtime Service
- `notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞–≤–∫–∞—Ö (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

**Flow:**

1. **Producer:** Realtime Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `MatchUpdateDTO` –≤ `events-updates`
2. **Broker:** Kafka —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ —Ç–æ–ø–∏–∫
3. **Consumer:** Core Service (`EventUpdateListener`) —á–∏—Ç–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
4. **Processing:** Core Service –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è, –º–∞—Ä–∫–µ—Ç—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤ –ë–î

---

## üîó –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

### HTTP/REST

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** Frontend ‚Üî API Gateway ‚Üî –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

**–§–æ—Ä–º–∞—Ç:** JSON

**–ú–µ—Ç–æ–¥—ã:**

- `GET` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–±—ã—Ç–∏—è, —Å—Ç–∞–≤–∫–∏, –ø—Ä–æ—Ñ–∏–ª—å)
- `POST` - —Å–æ–∑–¥–∞–Ω–∏–µ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, —Å—Ç–∞–≤–∫–∏)
- `PUT` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE` - —É–¥–∞–ª–µ–Ω–∏–µ

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

- `Authorization: Bearer <JWT_TOKEN>` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `X-Authenticated-User-Email` - email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è Gateway)
- `Content-Type: application/json`

### Kafka (Event Streaming)

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** Realtime Service ‚Üí Kafka ‚Üí Core Service

**–§–æ—Ä–º–∞—Ç:** JSON (MatchUpdateDTO)

**Pattern:** Publish-Subscribe

- **Producer:** Realtime Service –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è
- **Consumer:** Core Service –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–ø–∏–∫
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** Producer –Ω–µ –∂–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏

### JDBC

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã ‚Üí PostgreSQL

**ORM:** Hibernate/JPA

**Connection Pool:** HikariCP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Spring Boot)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT Authentication

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `email + password` –Ω–∞ `/api/auth/login`
2. Auth Service –ø—Ä–æ–≤–µ—Ä—è–µ—Ç credentials –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT
3. Frontend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ localStorage
4. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –≤–∫–ª—é—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –≤ `Authorization` header
5. API Gateway –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT:**

```
Header: {"alg": "HS256", "typ": "JWT"}
Payload: {"sub": "user@example.com", "iat": 1234567890, "exp": 1234603890}
Signature: HMACSHA256(header + payload, SECRET_KEY)
```

**–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** 10 —á–∞—Å–æ–≤

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoint'—ã

- `/api/v1/bets/**` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- `/api/v1/profile/**` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- `/api/v1/events/**` - –ø—É–±–ª–∏—á–Ω—ã–µ (—á—Ç–µ–Ω–∏–µ)

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

**–ê–ª–≥–æ—Ä–∏—Ç–º:** BCrypt (—Å —Å–æ–ª—å—é)

**–ü–æ—á–µ–º—É BCrypt?**

- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (–∑–∞—â–∏—Ç–∞ –æ—Ç brute-force)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–ª–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π (–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å)

---

## üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ú–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ:**

- Auth Service - –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é/–ª–æ–≥–∏–Ω
- Core Service - –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∞–≤–æ–∫
- Realtime Service - –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏–π

**–ö–∞–∫:**

- –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å–µ—Ä–≤–∏—Å–∞
- API Gateway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É (Load Balancing)
- Kafka –æ–±–µ—Å–ø–µ—á–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)

**–ß—Ç–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å:**

- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π (Redis, 30 —Å–µ–∫ TTL)
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (in-memory cache)
- JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î

**–ò–Ω–¥–µ–∫—Å—ã:**

- `events(status)` - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ live/upcoming
- `events(start_time)` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- `bets(user_id)` - –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `betselections(bet_id)` - —Å–≤—è–∑—å —Å—Ç–∞–≤–æ–∫ —Å –∏—Å—Ö–æ–¥–∞–º–∏

**Connection Pool:** 10 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–∏—Å (HikariCP)

---

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Docker Compose)

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

1. **zookeeper** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Kafka
2. **kafka** - –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
3. **postgres** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
4. **api-gateway** - —à–ª—é–∑
5. **auth-service** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
6. **core-service** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
7. **realtime-service** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π

### –°–µ—Ç—å:

**–ò–º—è:** `boombet-network`

**–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏** - –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### Volumes:

- `postgres-data` - –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ë–î

### –ü–æ—Ä—Ç—ã:

- Frontend: 3000
- API Gateway: 8080
- Auth Service: 8081
- Core Service: 8082
- Realtime Service: 8083
- PostgreSQL: 5432
- Kafka: 9092

---

## üéØ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏ —Å–¥–∞—á–µ

### 1. –ü–æ—á–µ–º—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∞ –Ω–µ –º–æ–Ω–æ–ª–∏—Ç?

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å—Ç–µ–∫
- **–ò–∑–æ–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–æ–≤** - –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ —Ä–æ–Ω—è–µ—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–¥ —Ä–∞–∑–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ (–∫–æ—Ç–æ—Ä—ã–µ –º—ã —É—á–ª–∏):**

- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏** - —Ä–µ—à–∏–ª–∏ —á–µ—Ä–µ–∑ API Gateway
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —á–µ—Ä–µ–∑ event sourcing (Kafka)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑—É–µ–º Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª–∏ –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã?

**Auth Service:**

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è - –∫—Ä–∏—Ç–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å OAuth2, 2FA –≤ –±—É–¥—É—â–µ–º

**Core Service:**

- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ - —Å—Ç–∞–≤–∫–∏, —Å–æ–±—ã—Ç–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏

**Realtime Service:**

- –ò–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ API (Sportradar, TheOddsAPI)
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å Core Service

### 3. –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª–∏ Kafka –≤–º–µ—Å—Ç–æ REST –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏?

**Event-driven –ø–æ–¥—Ö–æ–¥ –ª—É—á—à–µ –¥–ª—è:**

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - Realtime Service –Ω–µ –∂–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ Consumer'–æ–≤
- **Replay** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **Decoupling** - —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ

**REST –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**

- Frontend ‚Üí API Gateway ‚Üí –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏)

### 4. –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö?

**ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ PostgreSQL:**

- –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ = –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (—Å–ø–∏—Å–∞–Ω–∏–µ + —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏)
- –†–∞—Å—á–µ—Ç –≤—ã–∏–≥—Ä—ã—à–∞ = —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ + –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ)

**Eventual Consistency –¥–ª—è —Å–æ–±—ã—Ç–∏–π:**

- Realtime Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ Kafka
- Core Service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (—Å–µ–∫—É–Ω–¥—ã) –ø—Ä–∏–µ–º–ª–µ–º–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

**Idempotency:**

- –°–æ–±—ã—Ç–∏—è –≤ Kafka –∏–º–µ—é—Ç `externalId` - –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

### 5. –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–∫–∞–∑—ã?

**Retry mechanism:**

- Kafka –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Consumer'–∞
- HTTP –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç retry –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**Circuit Breaker (–¥–ª—è –±—É–¥—É—â–µ–≥–æ):**

- –ï—Å–ª–∏ Core Service –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, Gateway –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç cached –¥–∞–Ω–Ω—ã–µ
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ—Ç–∫–∞–∑–æ–≤

**Health Checks:**

- Spring Boot Actuator –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
- Kubernetes –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å —É–ø–∞–≤—à–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### 6. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å?

**–®–∞–≥–∏:**

1. –°–æ–∑–¥–∞—Ç—å Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –î–æ–±–∞–≤–∏—Ç—å –≤ Docker Compose
3. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ API Gateway
4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Kafka/PostgreSQL –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
5. –î–æ–±–∞–≤–∏—Ç—å health check endpoint

**–ü—Ä–∏–º–µ—Ä:** Notification Service –¥–ª—è email/push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- –°–ª—É—à–∞–µ—Ç —Ç–æ–ø–∏–∫ `notifications` –≤ Kafka
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —á–µ—Ä–µ–∑ SMTP
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É

### 7. –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å?

**–°–ª–æ–∏ –∑–∞—â–∏—Ç—ã:**

1. **JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è** - API Gateway –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω
2. **HTTPS** (–¥–ª—è production) - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
3. **BCrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å —Å–æ–ª—å—é
4. **SQL Injection –∑–∞—â–∏—Ç–∞** - JPA/Hibernate —Å prepared statements
5. **CORS** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
6. **Rate Limiting** (–¥–ª—è –±—É–¥—É—â–µ–≥–æ) - –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS

### 8. –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è?

**–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ RAM/CPU –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ connection pools (HikariCP)

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ Core Service
- Load Balancing —á–µ—Ä–µ–∑ API Gateway
- Kafka Consumer Groups –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**Database scaling:**

- Read Replicas –¥–ª—è —á—Ç–µ–Ω–∏—è (—Å–æ–±—ã—Ç–∏—è, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã)
- Master –¥–ª—è –∑–∞–ø–∏—Å–∏ (—Å—Ç–∞–≤–∫–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- Sharding –ø–æ user_id –≤ –±—É–¥—É—â–µ–º

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–¥–ª—è production)

### –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å:

- **Latency** - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- **Throughput** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **Error Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- **Database Connections** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–ª–∞
- **Kafka Lag** - –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- **ELK Stack** - –ª–æ–≥–∏ (Elasticsearch, Logstash, Kibana)
- **Jaeger** - distributed tracing

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å—Ç–∞–≤–∫–∏ (End-to-End)

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–º–µ—â–∞–µ—Ç —Å—Ç–∞–≤–∫—É:

```
Frontend ‚Üí API Gateway ‚Üí Core Service
‚Üì
Core Service:
  1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  2. –ù–∞—Ö–æ–¥–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ outcomes
  3. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç totalOdds (–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤)
  4. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç potentialPayout (stake * totalOdds)
  5. –°–ø–∏—Å—ã–≤–∞–µ—Ç stake —Å –±–∞–ª–∞–Ω—Å–∞
  6. –°–æ–∑–¥–∞–µ—Ç Bet (status = "pending")
  7. –°–æ–∑–¥–∞–µ—Ç BetSelection –¥–ª—è –∫–∞–∂–¥–æ–≥–æ outcome
  8. –°–æ–∑–¥–∞–µ—Ç Transaction (type = "BET_PLACEMENT")
  9. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Kafka (topic: notifications)
‚Üì
–û—Ç–≤–µ—Ç Frontend: bet_id, status, potentialPayout
```

### 2. –°–æ–±—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è:

```
Admin ‚Üí Frontend ‚Üí API Gateway ‚Üí Core Service
‚Üì
POST /api/v1/events/{eventId}/finish
Body: {"result": "2:1"}
‚Üì
Core Service:
  1. –ù–∞—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ
  2. –û–±–Ω–æ–≤–ª—è–µ—Ç status = "finished"
  3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç result = "2:1"
```

### 3. Scheduler —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞–≤–∫–∏:

```
BetSettlementScheduler (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫):
  1. –ù–∞—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏—è —Å–æ status = "finished"
  2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è:
     - –ù–∞—Ö–æ–¥–∏—Ç pending —Å—Ç–∞–≤–∫–∏
     - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—ã–∏–≥—Ä—ã—à–Ω—ã–µ outcomes –ø–æ result
     - –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏:
       * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ selections
       * –ï—Å–ª–∏ –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ outcomes –≤—ã–∏–≥—Ä–∞–ª–∏ ‚Üí status = "WON"
       * –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—Ä–æ–∏–≥—Ä–∞–ª ‚Üí status = "LOST"
       * –ó–∞—á–∏—Å–ª—è–µ—Ç potentialPayout –Ω–∞ –±–∞–ª–∞–Ω—Å
       * –°–æ–∑–¥–∞–µ—Ç Transaction (type = "WIN")
  3. –û–±–Ω–æ–≤–ª—è–µ—Ç status —Å–æ–±—ã—Ç–∏—è = "settled"
```

### 4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```
Frontend ‚Üí API Gateway ‚Üí Core Service
‚Üì
GET /api/v1/bets/history
‚Üì
–û—Ç–≤–µ—Ç: [{betId: 7, status: "WON", payout: 165.00}, ...]
```

---

## üéì –ò—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏  
‚úÖ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ —Ä–æ–Ω—è–µ—Ç —Å–∏—Å—Ç–µ–º—É  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã  
‚úÖ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç–µ–∫–∏  
‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ  
‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ  
‚úÖ **Deployment** - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üìö –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (summary)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç            | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                                               |
| -------------------- | -------------------------------------------------------- |
| **Frontend**         | React 18, TypeScript, Vite, Zustand, Axios, Tailwind CSS |
| **API Gateway**      | Spring Boot 3.5.6, Spring Cloud Gateway, JWT             |
| **Auth Service**     | Spring Boot, Spring Security, BCrypt, JWT                |
| **Core Service**     | Spring Boot, JPA/Hibernate, Schedulers                   |
| **Realtime Service** | Spring Boot, Kafka Producer, Schedulers                  |
| **Database**         | PostgreSQL 15                                            |
| **Message Broker**   | Apache Kafka 7.3.0, Zookeeper                            |
| **Containerization** | Docker, Docker Compose                                   |
| **Build Tools**      | Maven (backend), Vite (frontend)                         |

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 5 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** BoomBet Development Team
